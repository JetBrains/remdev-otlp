<idea-plugin>
    <dependencies>
        <module name="intellij.platform.backend"/>
        <module name="intellij.platform.kernel.backend"/>
        <module name="OtpDiagnostic.shared"/>
        <plugin id="com.jetbrains.codeWithMe"/>
    </dependencies>

    <extensions defaultExtensionNs="com.intellij">
        <openTelemetryExporterProvider implementation="com.jetbrains.otp.exporter.BackendMetricExporter"/>

        <applicationService serviceInterface="com.jetbrains.otp.settings.SpanFilterService"
                            serviceImplementation="com.jetbrains.otp.settings.BackendSpanFilterService"/>
        <platform.rpc.backend.remoteApiProvider implementation="com.jetbrains.otp.settings.OtpDiagnosticSettingsApiProvider"/>
        <platform.rpc.backend.remoteApiProvider implementation="com.jetbrains.otp.span.OtpSessionSpanApiProvider"/>
    </extensions>

    <applicationListeners>
        <listener topic="com.jetbrains.rdserver.core.RemoteClientSessionListener"
                  class="com.jetbrains.otp.connection.HostSessionSpanUpdater"/>
    </applicationListeners>
</idea-plugin>